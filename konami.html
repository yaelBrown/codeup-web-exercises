<!DOCTYPE html>
<html>
<head>
    <title>Konami Code</title>
</head>
<body>
    <h1>Konami Code</h1>
    <audio id="myAudio">
      <source src="snd/crap.wav">
    </audio>

<!-- Add jquery -->
<script src="./js/jquery-2.2.4.js"></script>
<script>
      "use strict";
      
      // Declare variables
      let audio = document.getElementById("myAudio");
      let keyPattern = [];
      let code = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65, 13];
      let crap = [67, 82, 65, 80];
      
      const checkCode = (pattern) => {
        console.log("pattern checked was: " + pattern);
        if (JSON.stringify(code) == JSON.stringify(pattern)) {
          alert("You have added 30 lives!");
          $('body').css("background-color", "red");
          $('body').css("color", "white");
        } else if (JSON.stringify(crap) === JSON.stringify(pattern)) {
          audio.play();
          $('body').css({
            "background": "url('/img/duke3.webp')",
            "backgroundSize": "cover"
          });
          $('h1').css("display", "none");
        } else {
          console.log("That was not the pattern!");
          // keyPattern = [];
        }
      };
      
      // Run on keypress
      $(document).keyup(function(event){
        console.log(event.keyCode);
        
        if (keyPattern.length < code.length) {
          keyPattern.push(event.keyCode);
        };
        
        if (keyPattern.length === crap.length) {
          checkCode(keyPattern);
        }
        
        if (keyPattern.length === code.length) {
          checkCode(keyPattern);
        }
      });
      </script>
</body>
</html>